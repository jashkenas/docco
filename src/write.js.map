{"version":3,"file":"write.js","sources":["write.litcoffee"],"names":[],"mappings":"AAAI,IAAA;;AAAA,CAAA,GAAc,OAAA,CAAQ,YAAR;;AACd,EAAA,GAAc,OAAA,CAAQ,UAAR;;AACd,IAAA,GAAc,OAAA,CAAQ,MAAR;;AACd,MAAA,GAAc,OAAA,CAAQ,QAAR;;AACd,SAAA,GAAc,OAAA,CAAQ,WAAR;;AACd,WAAA,GAAc,OAAA,CAAQ,cAAR;;AACd,IAAA,GAAc,OAAA,CAAQ,MAAR;;AACd,IAAA,GAAc,OAAA,CAAQ,MAAR;;AAOd,MAAM,CAAC,OAAP,GAAiB,KAAA,GAAQ,SAAC,MAAD,EAAS,QAAT,EAAmB,MAAnB;AAIvB,MAAA;EAAA,WAAA,GAAc,SAAC,IAAD;WACZ;EADY;EAGd,YAAA,GAAe,SAAC,GAAD;WACb,MAAM,CAAC,IAAP,CAAY,GAAZ,CAAgB,CAAC,GAAjB,CAAqB,SAAC,GAAD;aACnB,GAAI,CAAA,GAAA;IADe,CAArB;EADa;EAKf,YAAA,GAAe,CAAC,CAAC,IAAF,CAAO,QAAP,EAAiB,SAAC,OAAD;WAC9B,OAAO,CAAC,QAAQ,CAAC,MAAjB,GAA0B;EADI,CAAjB;EAEf,IAAkD,YAAlD;IAAA,KAAA,GAAQ,MAAM,CAAC,KAAP,CAAa,YAAY,CAAC,QAA1B,CAAoC,CAAA,CAAA,EAA5C;;EACA,QAAA,GAAW,KAAA,IAAU,KAAK,CAAC,IAAN,KAAc,SAAxB,IAAsC,KAAK,CAAC,KAAN,KAAe;EAChE,KAAA,GAAW,QAAH,GAAiB,KAAK,CAAC,IAAvB,GAAiC,IAAI,CAAC,QAAL,CAAc,MAAd;EAEzC,QAAA,GAAW,MAAM,CAAC,kBAAmB,CAAA,MAAA;EACrC,MAAA,GAAS,YAAA,CAAa,QAAQ,CAAC,MAAtB;EACT,KAAA,GAAQ,MAAM,CAAC,GAAP,CAAW,SAAC,CAAD;AAAM,WAAO,CAAC,CAAC;EAAf,CAAX;EACR,KAAA,GAAQ,MAAM,CAAC,GAAP,CAAW,SAAC,CAAD;AAAM,WAAO,CAAC,CAAC;EAAf,CAAX;EACR,IAAA,GAAO,MAAM,CAAC,QAAP,CAAgB;IACrB,OAAA,EAAS,KADY;IAErB,KAAA,EAAO,KAFc;IAGrB,KAAA,EAAO,MAHc;IAIrB,GAAA,EAAK,QAAQ,CAAC,WAAW,CAAC,GAJL;IAKrB,OAAA,KALqB;IAMrB,UAAA,QANqB;IAOrB,UAAA,QAPqB;IAQrB,MAAA,IARqB;IASrB,aAAA,WATqB;IAUrB,OAAA,EAAS,MAAM,CAAC,OAVK;GAAhB;EAaP,OAAO,CAAC,GAAR,CAAY,SAAA,GAAU,MAAV,GAAiB,MAAjB,GAAsB,CAAC,WAAA,CAAY,QAAQ,CAAC,WAAW,CAAC,IAAjC,CAAD,CAAlC;EACA,EAAE,CAAC,aAAH,CAAiB,WAAA,CAAY,QAAQ,CAAC,WAAW,CAAC,IAAjC,CAAjB,EAAyD,IAAzD;AApCuB","sourcesContent":["    _           = require 'underscore'\n    fs          = require 'fs-extra'\n    path        = require 'path'\n    marked      = require 'marked'\n    commander   = require 'commander'\n    highlightjs = require 'highlight.js'\n    path        = require 'path'\n    glob        = require 'glob'\n\n\nOnce all of the code has finished highlighting, we can **write** the resulting\ndocumentation file by passing the completed HTML sections into the template,\nand rendering it to the specified output path.\n\n    module.exports = write = (source, sections, config) ->\n\n      # todo: figure out how to remove the breaking change here. normally this should return file+'.html'\n\n      destination = (file) ->\n        file\n\n      objectValues = (obj) ->\n        Object.keys(obj).map((key) ->\n          obj[key]\n        )\n\n      firstSection = _.find sections, (section) ->\n        section.docsText.length > 0\n      first = marked.lexer(firstSection.docsText)[0] if firstSection\n      hasTitle = first and first.type is 'heading' and first.depth is 1\n      title = if hasTitle then first.text else path.basename source\n\n      fileInfo = config.informationOnFiles[source]\n      others = objectValues(fileInfo.others)\n      links = others.map((o)-> return o.link)\n      files = others.map((o)-> return o.file)\n      html = config.template {\n        sources: links,\n        files: files,\n        links: others,\n        css: fileInfo.destination.css,\n        title,\n        hasTitle,\n        sections,\n        path,\n        destination,\n        flatten: config.flatten\n      }\n\n      console.log \"docco: #{source} -> #{destination fileInfo.destination.path}\"\n      fs.writeFileSync destination(fileInfo.destination.path), html\n      return\n"]}